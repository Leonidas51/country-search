(this["webpackJsonpcountry-search"]=this["webpackJsonpcountry-search"]||[]).push([[0],{13:function(e,t,a){},14:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(3),i=a.n(s),c=a(4),l=a(5),u=a(1),o=a(7),h=a(6);var m={0:10,1:20,2:50},v=function(e){Object(o.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={input_value:"",limit:10,loading:!1,search_result:[],search_result_sliced:[],error:""},n.input_ref=r.a.createRef(),n.onInputChange=n.onInputChange.bind(Object(u.a)(n)),n.onSelectChange=n.onSelectChange.bind(Object(u.a)(n)),n.fetchCountries=function(e,t){var a=null;return function(){for(var n=this,r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];var c=function(){e.apply(n,s),a=null};a&&clearTimeout(a),a=setTimeout(c,t)}}(n.fetchCountries,500),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.input_ref.current.focus()}},{key:"fetchCountries",value:function(e){var t=this;this.setState({error:""}),e.length?fetch("https://restcountries.eu/rest/v2/all").then((function(a){200===a.status?a.json().then((function(a){var n=t.filterResult(a,e);t.setState({search_result:n,search_result_sliced:n.slice(0,t.state.limit),loading:!1})})):t.setState({loading:!1,error:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430! \u041a\u043e\u0434 \u043e\u0442\u0432\u0435\u0442\u0430: ".concat(a.status)})})):this.setState({search_result:[],search_result_sliced:[],loading:!1})}},{key:"filterResult",value:function(e,t){var a=[];t=t.toLowerCase();for(var n=0;n<e.length;n++){var r=e[n].name.toLowerCase().indexOf(t);-1!==r&&(0===r?a.unshift(e[n].name):a.push(e[n].name))}return a}},{key:"onInputChange",value:function(e){var t=e.target.value;this.setState({input_value:t,loading:!0}),this.fetchCountries(t)}},{key:"onSelectChange",value:function(e){this.setState({limit:m[e.target.value],search_result_sliced:this.state.search_result.slice(0,m[e.target.value])})}},{key:"render",value:function(){var e;return e=this.state.error?r.a.createElement("div",{className:"search_error"},this.state.error):this.state.search_result_sliced.map((function(e){return r.a.createElement("div",{className:"country_name",key:e},e)})),r.a.createElement("div",{className:"App"},r.a.createElement("input",{id:"main-input",type:"text",value:this.state.input_value,ref:this.input_ref,onChange:this.onInputChange}),r.a.createElement("div",{className:"limit-select-container"},r.a.createElement("span",{className:"limit-select-text"},"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c: "),r.a.createElement("select",{onChange:this.onSelectChange},r.a.createElement("option",{value:"0"},"10"),r.a.createElement("option",{value:"1"},"20"),r.a.createElement("option",{value:"2"},"50"))),r.a.createElement("div",{className:"search-result"},this.state.loading?r.a.createElement("div",{className:"spinner"}):e))}}]),a}(r.a.Component);a(13);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,null)),document.getElementById("root"))},8:function(e,t,a){e.exports=a(14)}},[[8,1,2]]]);
//# sourceMappingURL=main.a92d947a.chunk.js.map